---
layout: post
title: "Дополнительный модуль к скриптам"
author: "nnh"
description: Дополнительный модуль к скриптам.
tags: [скрипт,lua,qlua,квик,quik,сеточник,SmartAlgoNet,автостоп,multiAutoStop]
---

Дополнительный модуль "ТИП ОБЪЁМА ВХОДА" к скриптам "Автостоп" (multiAutoStop), "Сеточник" (SmartAlgoNet)

[Видео работы](https://www.youtube.com/watch?v=9WiXQRM6wik&t=220s)

[rutube](https://rutube.ru/video/c8a254799c2ff596488a374c7291d5af/)

##	Основные возможности

При подключении модуля (скопировать поставляемый файл в папку plugins) в разделе ТОРГОВЫЕ НАСТРОЙКИ, появятся параметры:

![](/assets/images/plugins/trade_qty_type.PNG)

 -	Тип объема входа. Возможные значения:
    -	Qty - количестов лот, контрактов.
    -	Currency – в валюте цены. Для примера войти на 10000 руб. Объем будет пересчитан на ближайшее целое число лот (контрактов) формирующее указанную сумму сделки. Для срочного рынка в качестве суммы сделки берется суммма ГО (не текущая цена контракта) для указанной цены сделки.
    -	Sum % – процент от суммы. Для примера, войти на 10% от 1 000 000 руб. Объем будет пересчитан на ближайшее целое число лот (контрактов) формирующее указанную сумму сделки. Для срочного рынка в качестве суммы сделки берется суммма ГО (не текущая цена контракта) для указанной цены сделки.
-	 Доступная сумма для торговли - Если указан "Тип объема входа" равный "Sum %", то для расчета торгового объема необходимо указать доступную сумму от которой будет произволдится расчет числа лот (контрактов), формирующее указанный процент от сумму.

Все поля, отвечающие за торговый объем, будут вводиться в соответствии с указанным типом торгового объема.
При активации типа, отличного от "Количество лот" Qty, торговый объем задается в сумме валюты цены инструмента. В режиме "Currency" прямо указывая допустимую сумму для торговли. В режиме "Sum %" косвенно как процент от доступной суммы, указанной в параметре "Доступная сумма для торговли".
Режим "Sum %" позволяет регулировать шаг изменения суммы торгового объема. Для примера, указав доступную сумму для торговли равной 1 000 000 руб., и введя торговый объем 10 %, получаем торговый объем в 100 000 руб.
Соответсвенно, увеличивая объем на 1 до 11%, увеличивается сумма сразу на 10 000 руб. Т.о. можно через быстрые клавиши регулировать торговый объем на дельту, отличную от 1 руб., как это будет в режиме "Currency".
 -	Вариант округления расчета объема - Вариант округления расчета торгового объема. Если при расчете колчества лот (контрактов), формирующее указанную сумму сделки получено нецелое число, то произойдет округление до ближайшего целового числа. Возможные значения:
    -	MATH - по математическим правилам.
    -	DOWN - всегда вниз.
    -	UP - всегда вверх.

Параметр "Вариант округления расчета объема" контролирует вариант округления итогового количества лот (контрактов), рассчитанного от суммы.  Для примера, сумма торгового объема 50 000 руб. Стоимость одного лота (ГО контракта) составляет 17 000 руб. Количественный торговый объем будет равен 50 000/17 000 = 2.94, т.е. это нецелое число. Т.о. при варианте округления MATH будет получено значение 3, как результат математического округления.
При варианте UP тоже 3, т.к. ближайшее целое число сверху это 3. При варианте DOWN будет получено 2, т.к. целое число снизу это 2.