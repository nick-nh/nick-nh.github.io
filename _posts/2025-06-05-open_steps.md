layout: post
title: "Дополнительный модуль к скрипту "Автостоп" (multiAutoStop)"
author: "nnh"
description: Дополнительный модуль к скрипту "Автостоп" (multiAutoStop).
tags: [скрипт,lua,qlua,квик,quik,автостоп,multiAutoStop]
---

Дополнительный модуль "ДОКУПКИ" к скрипту "Автостоп" (multiAutoStop)

##	Основные возможности

Модуль предназначен для открытия позиции на дополнительных уровнях. После открытия позиции, если активировн режим докупки, будут установаливаться лимитные ордера на вход в позицию, пока не будут исполнены все уровни докупки.

При подключении модуля (скопировать поставляемый файл в папку plugins) в окне настроек появится раздел:

![](/assets/images/plugins/open_steps.PNG)


 #### РАЗДЕЛ: НАСТРОЙКИ ДОКУПКИ

   - Дополнительно открывать позицию по уровням - Если включено, то после совершения первой сделки будет установлен ордер на вход с заданным шагом от прошлой сделки и торговым объемом докупки.
        После его исполнения будет установлен ещё один ордер. И так пока не будет достигнуто заданное число докупок.
        Т.о. полный торговый объём - это [Первоначальный торговый объём] + [Число уровней докупки]    * [Объём докупки]
   - Число уровней докупки - общее число уровней докупки
   - Торговый объём уровня докупки - объём на каждом уровне докупки
   - Коэфф. объема докупки - Коэффициент торгового объема докупки. Каждый следующий объём докупки равен прошлому с учетом коэффициента.
        Для примера. Торговый объем докупки = 1. Коэффициент = 2. Первый объем докупки = 1.
        Второй = 1 (первый)     *  2 = 2.
        Третий = 2 (второй)     *  2 = 4. И т.д. Т.е. стратегия мартингейла.
        Коэффициент может быть < 1, тогда будет происходит уменьшение объема.
        Важно, объем будет округлять до 1, если расчетная величина станет меньше 1.
   - Тип цены шага уровней докупки - Возможные значения:
        *  % (процент) - процент.
        *  Steps – шаги цены инструмента. Целое число. Шаг цены инструмента определен его спецификацией.
        *  Pips - пункты цены инструмента. Целое число. Пункт - это минимальное изменение цены валюте цены инструмента. Для примера, цена 90.61 - это 9061 пункт. Изменение 90.61-90.62 - это разница в один пункт.
        *  RUR - рубли. Здесь имеется в виду сумма в рублях относительно позиции по инструменту. Допустим 100 рублей на всю позицию. Для валютных инструментов происходт пересчёт в рубли.
        *  PriceUnits - значение в валюте цены инструмента, например в рублях, usd.

   - Шаг уровней докупки - Размер шага уровней докупки в указанных единицах цены инструмента.
   - Коэфф. шага уровней докупки - Коэффициент шага уровней докупки. Каждый следующий шаг равен прошлому с учетом коэффициента.
        Для примера. Шаг уровней докупки = 100. Коэффициент = 1.1. Перый шаг = 100.
        Второй = 100 (первый)     *  1.1 = 110.
        Третий = 110 (второй)     *  1.1 = 121. И т.д.
        Коэффициент может быть < 1, тогда будет происходит сжатие размера шага.

Если в процессе работы с уровнями докупки совершить сделку вручную, т.е. не дожидаясь исполнения очередного уровня докупить некий объём, то число уровней докупки будет уменьшено, чтобы выйти на оставшийся полный объём.
